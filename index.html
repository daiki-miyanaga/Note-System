<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ゆうなまノート・月間修正システム - メインダッシュボード</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .store-selector {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .store-selector h3 {
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }

        .store-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .store-btn {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 500;
        }

        .store-btn:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateY(-2px);
        }

        .store-btn.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card h3 {
            color: #333;
            margin-bottom: 15px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .metric:last-child {
            border-bottom: none;
        }

        .metric-label {
            color: #666;
        }

        .metric-value {
            font-weight: bold;
            color: #333;
            font-size: 1.1rem;
        }

        .metric-value.positive {
            color: #27ae60;
        }

        .metric-value.negative {
            color: #e74c3c;
        }

        .metric-value.warning {
            color: #f39c12;
        }

        .system-nav {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .system-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
        }

        .system-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
        }

        .system-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .system-card p {
            color: #666;
            margin-bottom: 20px;
        }

        .system-card .features {
            list-style: none;
            text-align: left;
        }

        .system-card .features li {
            padding: 5px 0;
            color: #555;
            position: relative;
            padding-left: 20px;
        }

        .system-card .features li::before {
            content: "✓";
            color: #27ae60;
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        .quick-actions {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .quick-actions h3 {
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }

        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .action-btn {
            padding: 15px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.3);
        }

        .weather-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .weather-icon {
            font-size: 1.5rem;
        }

        .current-date {
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 25px;
            color: white;
            font-weight: 500;
            margin-bottom: 20px;
            display: inline-block;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .system-nav {
                grid-template-columns: 1fr;
            }
        }

        .alert {
            background: #ffeaa7;
            border: 1px solid #fdcb6e;
            border-radius: 8px;
            padding: 10px 15px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert.warning {
            background: #fab1a0;
            border-color: #e17055;
        }

        .reservations-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .reservation-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .reservation-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="current-date" id="currentDate"></div>
            <h1>ゆうなまノート・月間修正システム</h1>
            <p class="subtitle">店舗管理ダッシュボード</p>
        </div>

        <!-- 店舗選択セクション -->
        <div class="store-selector">
            <h3>🏪 店舗選択</h3>
            <div class="store-grid" id="storeGrid">
                <div class="store-btn" data-store="KRB01">本店</div>
                <div class="store-btn" data-store="KRB02">駅前店</div>
                <div class="store-btn" data-store="KRB03">イオン店</div>
                <div class="store-btn" data-store="KRB04">アウトレット店</div>
            </div>
            <div style="text-align: center; color: #666;">
                選択中の店舗: <span id="selectedStore">未選択</span>
            </div>
        </div>

        <!-- ダッシュボード情報 -->
        <div class="dashboard-grid">
            <!-- 本日の売上予算 -->
            <div class="card">
                <h3>📊 本日の売上予算・実績</h3>
                <div class="weather-info">
                    <span class="weather-icon" id="weatherIcon">☀️</span>
                    <span>天気: <span id="currentWeather">晴れ</span></span>
                    <span>気温: <span id="currentTemp">25</span>°C</span>
                </div>
                <div class="metric">
                    <span class="metric-label">売上予算</span>
                    <span class="metric-value">¥120,000</span>
                </div>
                <div class="metric">
                    <span class="metric-label">現在売上</span>
                    <span class="metric-value positive">¥85,400</span>
                </div>
                <div class="metric">
                    <span class="metric-label">達成率</span>
                    <span class="metric-value positive">71.2%</span>
                </div>
                <div class="metric">
                    <span class="metric-label">予算差</span>
                    <span class="metric-value warning">-¥34,600</span>
                </div>
            </div>

            <!-- 在庫状況 -->
            <div class="card">
                <h3>📦 在庫・入荷状況</h3>
                <div class="metric">
                    <span class="metric-label">総入荷アイテム</span>
                    <span class="metric-value">47品目</span>
                </div>
                <div class="metric">
                    <span class="metric-label">完売商品</span>
                    <span class="metric-value warning">3品目</span>
                </div>
                <div class="metric">
                    <span class="metric-label">ロス率</span>
                    <span class="metric-value">2.1%</span>
                </div>
                <div class="metric">
                    <span class="metric-label">在庫回転率</span>
                    <span class="metric-value positive">8.5回</span>
                </div>
                <div class="alert warning" id="stockAlert" style="display: none;">
                    ⚠️ 人気商品が早期完売しています
                </div>
            </div>

            <!-- 予約情報 -->
            <div class="card">
                <h3>📅 本日の予約情報</h3>
                <div class="metric">
                    <span class="metric-label">総予約件数</span>
                    <span class="metric-value">12件</span>
                </div>
                <div class="metric">
                    <span class="metric-label">予約売上</span>
                    <span class="metric-value">¥18,500</span>
                </div>
                <div class="reservations-list" id="reservationsList">
                    <div class="reservation-item">
                        <span>ショートケーキ × 2</span>
                        <span>¥840</span>
                    </div>
                    <div class="reservation-item">
                        <span>チョコレートケーキ × 1</span>
                        <span>¥520</span>
                    </div>
                    <div class="reservation-item">
                        <span>カスタードプリン × 4</span>
                        <span>¥1,920</span>
                    </div>
                    <div class="reservation-item">
                        <span>フルーツタルト × 1</span>
                        <span>¥680</span>
                    </div>
                    <div class="reservation-item">
                        <span>その他8件</span>
                        <span>¥14,540</span>
                    </div>
                </div>
            </div>

            <!-- 売上トレンド -->
            <div class="card">
                <h3>📈 売上トレンド</h3>
                <div class="metric">
                    <span class="metric-label">昨日比</span>
                    <span class="metric-value positive">+8.5%</span>
                </div>
                <div class="metric">
                    <span class="metric-label">前週同曜日比</span>
                    <span class="metric-value positive">+12.3%</span>
                </div>
                <div class="metric">
                    <span class="metric-label">月累計</span>
                    <span class="metric-value">¥2,845,200</span>
                </div>
                <div class="metric">
                    <span class="metric-label">月予算達成率</span>
                    <span class="metric-value positive">94.8%</span>
                </div>
            </div>
        </div>

        <!-- システムナビゲーション -->
        <div class="system-nav">
            <a href="younama-notebook.html" class="system-card">
                <h3>📔 ゆうなまノート</h3>
                <p>日々の入荷数変更と過去参照システム</p>
                <ul class="features">
                    <li>入荷数の編集・修正</li>
                    <li>過去実績の参照・比較</li>
                    <li>推奨入荷数の提案</li>
                    <li>売上・在庫の自動計算</li>
                </ul>
            </a>

            <a href="monthly-adjustment.html" class="system-card">
                <h3>📊 月間修正ノート</h3>
                <p>月次の発注管理・調整システム</p>
                <ul class="features">
                    <li>月間発注計画の管理</li>
                    <li>発注数量の調整・修正</li>
                    <li>売上予測と実績比較</li>
                    <li>月次レポート生成</li>
                </ul>
            </a>


            <a href="store-master.html" class="system-card">
                <h3>🏪 店舗マスター管理</h3>
                <p>店舗情報の統合管理システム</p>
                <ul class="features">
                    <li>店舗情報の一元管理</li>
                    <li>営業時間・担当者設定</li>
                    <li>売上目標の管理</li>
                    <li>システム設定の変更</li>
                </ul>
            </a>

        </div>

        <!-- クイックアクション -->
        <div class="quick-actions">
            <h3>⚡ クイックアクション</h3>
            <div class="action-grid">
                <button class="action-btn" onclick="quickSave()">📱 データ同期</button>
                <button class="action-btn" onclick="exportData()">📤 CSV出力</button>
                <button class="action-btn" onclick="generateReport()">📋 日次レポート</button>
                <button class="action-btn" onclick="backupData()">💾 データバックアップ</button>
            </div>
        </div>
    </div>

    <script>
        // 現在日時の表示
        function updateCurrentDate() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric', 
                weekday: 'long',
                hour: '2-digit',
                minute: '2-digit'
            };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('ja-JP', options);
        }

        // 店舗選択機能
        function initStoreSelector() {
            const storeButtons = document.querySelectorAll('.store-btn');
            const selectedStoreSpan = document.getElementById('selectedStore');
            
            storeButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    storeButtons.forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    
                    const storeId = btn.dataset.store;
                    const storeName = btn.textContent;
                    selectedStoreSpan.textContent = `${storeName} (${storeId})`;
                    
                    localStorage.setItem('selectedStore', JSON.stringify({
                        id: storeId,
                        name: storeName
                    }));
                    
                    updateDashboardData(storeId);
                });
            });
            
            // 保存された店舗を復元
            const savedStore = localStorage.getItem('selectedStore');
            if (savedStore) {
                const store = JSON.parse(savedStore);
                const storeBtn = document.querySelector(`[data-store="${store.id}"]`);
                if (storeBtn) {
                    storeBtn.click();
                }
            }
        }

        // ダッシュボードデータの更新
        function updateDashboardData(storeId) {
            console.log(`Updating dashboard for store: ${storeId}`);
            
            // 実際の実装では、ここでAPIから店舗固有のデータを取得
            // 今回はサンプルデータで表示を更新
            updateSalesData(storeId);
            updateStockData(storeId);
            updateReservationData(storeId);
        }

        // 売上データ更新
        function updateSalesData(storeId) {
            // 店舗別のサンプルデータ
            const salesData = {
                'KRB01': { budget: 120000, current: 85400, rate: 71.2 },
                'KRB02': { budget: 95000, current: 72800, rate: 76.6 },
                'KRB03': { budget: 110000, current: 89200, rate: 81.1 },
                'KRB04': { budget: 80000, current: 65300, rate: 81.6 }
            };
            
            const data = salesData[storeId] || salesData['KRB01'];
            const difference = data.current - data.budget;
            
            document.querySelector('[data-metric="budget"]').textContent = `¥${data.budget.toLocaleString()}`;
            document.querySelector('[data-metric="current"]').textContent = `¥${data.current.toLocaleString()}`;
            document.querySelector('[data-metric="rate"]').textContent = `${data.rate}%`;
            document.querySelector('[data-metric="difference"]').textContent = `¥${difference.toLocaleString()}`;
        }

        // 天気情報の更新
        function updateWeatherInfo() {
            const weatherConditions = ['晴れ', '曇り', '雨', '雪'];
            const weatherIcons = ['☀️', '☁️', '🌧️', '❄️'];
            const temp = Math.floor(Math.random() * 20) + 15; // 15-35度
            const weatherIndex = Math.floor(Math.random() * weatherConditions.length);
            
            document.getElementById('currentWeather').textContent = weatherConditions[weatherIndex];
            document.getElementById('weatherIcon').textContent = weatherIcons[weatherIndex];
            document.getElementById('currentTemp').textContent = temp;
        }

        // 在庫アラートのチェック
        function checkStockAlerts() {
            // 完売商品数が3以上の場合にアラート表示
            const soldOutCount = 3;
            const alert = document.getElementById('stockAlert');
            if (soldOutCount >= 3) {
                alert.style.display = 'flex';
            }
        }

        // クイックアクション関数
        function quickSave() {
            alert('データ同期を開始しました...');
            // 実際の同期処理を実装
        }

        function exportData() {
            alert('CSV出力を開始しました...');
            // CSV出力処理を実装
        }

        function generateReport() {
            alert('日次レポートを生成しました...');
            // レポート生成処理を実装
        }

        function backupData() {
            alert('データバックアップを開始しました...');
            // バックアップ処理を実装
        }

        // 初期化
        document.addEventListener('DOMContentLoaded', () => {
            updateCurrentDate();
            initStoreSelector();
            updateWeatherInfo();
            checkStockAlerts();
            
            // 定期的に日時を更新
            setInterval(updateCurrentDate, 60000);
        });

        // メトリクス要素にdata-metric属性を追加するためのヘルパー
        document.addEventListener('DOMContentLoaded', () => {
            const metrics = document.querySelectorAll('.metric-value');
            metrics[1].setAttribute('data-metric', 'budget');
            metrics[2].setAttribute('data-metric', 'current');
            metrics[3].setAttribute('data-metric', 'rate');
            metrics[4].setAttribute('data-metric', 'difference');
        });
    </script>
</body>
</html>